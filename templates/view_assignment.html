{% extends "base.html" %}
{% block title %}{{ assignment.title }}{% endblock %}
{% block content %}
<h1 class="page-title">{{ assignment.title }}</h1>
<p style="color: var(--text-muted); margin-bottom: 1rem;">
  <a href="{{ url_for('student_dashboard') }}" class="file-link">← Back to assignments</a>
</p>
<div class="card" style="margin-bottom: 1rem;">
  <p class="assignment-meta">Due {% if assignment.due_date %}{{ assignment.due_date.strftime('%b %d, %Y %H:%M') }}{% else %}No due date{% endif %} · Max {{ assignment.max_marks }} marks</p>
  {% if assignment.description %}
  <div style="margin-top: 1rem;">
    <strong>Instructions</strong>
    <p style="white-space: pre-wrap; margin: 0.5rem 0 0 0;">{{ assignment.description }}</p>
  </div>
  {% endif %}
</div>
{% if submission %}
<div class="card" style="margin-bottom: 1rem;">
  <h3>Your submission</h3>
  <p class="assignment-meta">Submitted {{ submission.submitted_at.strftime('%b %d, %Y %H:%M') }}</p>
  {% if submission.content %}
  <pre style="background: var(--bg); padding: 1rem; border-radius: 8px; white-space: pre-wrap;">{{ submission.content }}</pre>
  {% endif %}
  {% if submission.file_path %}
  <p>File: {{ submission.file_path }}</p>
  {% endif %}
  {% if submission.marks is not none %}
  <p style="margin-top: 1rem;"><strong>Marks:</strong> {{ submission.marks }} / {{ assignment.max_marks }}</p>
  {% if submission.feedback %}
  <p><strong>Feedback:</strong> {{ submission.feedback }}</p>
  {% endif %}
  {% else %}
  <p style="margin-top: 0.5rem; color: var(--text-muted);">Not yet graded.</p>
  {% endif %}
</div>
<a href="{{ url_for('submit_assignment', aid=assignment.id) }}" class="btn btn-ghost">Update submission</a>
{% else %}
<a href="{{ url_for('submit_assignment', aid=assignment.id) }}" class="btn btn-primary">Submit assignment</a>
{% endif %}
{% endblock %}
